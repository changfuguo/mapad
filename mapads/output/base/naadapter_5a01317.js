!function(e,t,n,i){var r={},a={};a.trim=function(){var e=/(^\s*)|(\s*$)/g;return function(t){return t&&"string"==typeof t?t.replace(e,""):t}}(),a.startWith=function(e,t){return!e||!t||0==e.length||t.length>e.length?!1:e.substr(0,t.length)==t?!0:!1},a.endWith=function(e,t){return!e||!t||0==e.length||t.length>e.length?!1:e.substr(e.length-t.length)==t?!0:!1},a.isBlank=function(e){return void 0===e||null===e||""===a.trim(e)},a.isNull=function(e){return!e&&e!==!1&&0!==e},a.objectType=function(){var e=/^\[object (.*)\]$/;return function(t){return"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(e)[1]:void 0}}(),a.internalUnique=function(){var e=0;return function(){return++e}}(),a.unique=function(){var e=0;return function(){return++e}}(),a.getScript=function(n,i,r,o,c,u){"Object"==a.objectType(n)&&(i=n.success,r=n.error,o=n.timeout,c=n.onetime,u=n.notime,n=n.url);var s=t.createElement("script"),p=!1,l=function(){p||(p=!0,"Function"==a.objectType(i)&&i.call(e),c&&(s.removeEventListener("load",l),s.removeEventListener("error",d),t.body.removeChild(s)))},d=function(){p||(p=!0,"Function"==a.objectType(r)&&r.call(e),s.removeEventListener("load",l),s.removeEventListener("error",d),t.body.removeChild(s))};s.addEventListener("load",l),s.addEventListener("error",d),u||(n=a.appendParam(n,"_naat="+a.internalUnique())),s.setAttribute("src",n),t.body.appendChild(s),o&&setTimeout(function(){d.call(e)},o)},a.getJsonp=function(e,t,n,i,r,o){"Object"==a.objectType(e)&&(t=e.data,n=e.success,i=e.error,r=e.timeout,o=e.notime,e=e.url),e=a.appendParam(e,t),e=a.appendCallback(e,n),a.getScript(e,void 0,i,r||5e3,!0,o)},a.appendParam=function(e,t){return a.isNull(t)?e:("Object"==a.objectType(t)&&(t=a.stringifyObject(t)),e||(e=""),e+=a.endWith(e,"?")?t:a.endWith(e,"&")?e.indexOf("?")>=0?t:"?"+t:e.indexOf("?")>=0?"&"+t:"?"+t)},a.appendCallback=function(){var t=/(&|\?)callback=([^&]*)?(&|$)/g;return function(n,i){if("Function"!=a.objectType(i)||a.isBlank(n))throw new Error("callback function should be a function and url can't be blank.");var r="naaInternalCallback"+a.internalUnique();e[r]=function(t){i.call(e,t),delete e[r]};var o=n;return o=n.search(t)>=0?n.replace(t,function(e,t,n,i){return t+"callback="+r+i}):a.appendParam(n,"callback="+r)}}(),a.stringifyObject=function(e){if("Object"!==a.objectType(e))return a.isBlank(e)||"string"!=typeof e?"":e;var t="";return a.hasOwn(e,function(e,n){t+="&"+e+"="+encodeURIComponent(n)}),t.substr(1)},a.parseStringifiedObject=function(e){if("string"!=typeof e)return"object"==typeof e?e:{};var t,n,i,r,a,o={},c=e.split("&"),u=c.length;for(t=0;u>t;t++)n=c[t],i=n.indexOf("="),0>=i||(r=n.substring(0,i),a=decodeURIComponent(n.substr(i+1)),o[r]=a);return o},a.hasOwn=function(t,n){var i,r;for(i in t)t.hasOwnProperty(i)&&(r=t[i],n&&n.call(e,i,r))},a.makeIframeRequest=function(e,n){var i=t.createElement("iframe");i.style.cssText="position:absolute;top:-9999px;left:-9999px;width:0;height:0",i.id="naaIframeRequest"+a.internalUnique(),i.setAttribute("src",a.appendParam(e,n?"":"_naat="+a.internalUnique())),t.body.appendChild(i),setTimeout(function(){t.body.removeChild(i)},100)},a.makeAnchorRequest=function(e,n){var i=t.createElement("a");i.style.cssText="position:absolute;top:-9999px;left:-9999px;",i.id="naaAnchorRequest"+a.internalUnique(),i.setAttribute("href",a.appendParam(e,n?"":"_naat="+a.internalUnique())),t.body.appendChild(i),i.click(),setTimeout(function(){t.body.removeChild(i)},100)},a.filterUrl=function(e,t){return"Array"!=a.objectType(t)&&(t=["BDUSS","cuid"]),t.forEach(function(t){var n=new RegExp("[&]*"+t+"=([^&]*)","ig");e=e.replace(n,"")}),e},a.compareSv=function(e,t){if(!e||!t||"string"!=typeof e||"string"!=typeof t)throw new Error("sv should be a string");var n,i,r,a=e.split("."),o=t.split("."),c=a.length,u=o.length,s=Math.min(c,u);for(n=0;s>n;n++){if(i=parseInt(a[n]),r=parseInt(o[n]),r>i)return-1;if(i>r)return 1}return c>u?1:u>c?-1:0},r.util=a,["trim","startWith","endWith","isBlank","isNull","unique","compareSv","filterUrl","getJsonp"].forEach(function(e){r[e]=a[e]});var o=function(){var e={},t=n.userAgent,i=/android|webos|ip(hone|ad|od)|opera (mini|mobi|tablet)|iemobile|windows.+(phone|touch)|mobile|fennec|kindle (Fire)|Silk|maemo|blackberry|playbook|bb10\; (touch|kbd)|Symbian(OS)|Ubuntu Touch/i,r=/ip(hone|ad|od)/i;t||(t=""),t=t.toLowerCase(),e.isAndroid=t.indexOf("android")>-1,e.isIos=r.test(t),e.isWeixin=t.indexOf("micromessenger")>-1,e.isWeibo=t.indexOf("weibo")>-1,e.isNull=a.isBlank(t),e.isMobile=i.test(t)||e.isNull,e.isPc=!e.isMobile;var o=t.indexOf("baidumap_andr")>-1||t.indexOf("baidumap_ipho")>-1||t.indexOf("baidumap_ipad")>-1;return e.isNative=!e.isWeibo&&!e.isWeixin&&(o||e.isNull),e}();r.plat=o;var c=function(){var e=i.search;return e.length>0&&(e=e.substr(1)),a.parseStringifiedObject(e)}();r.query=c,r.openBaiduMap=function(e,t){e=a.appendParam(e,t),o.isAndroid?a.makeIframeRequest(e,!0):a.makeAnchorRequest(e,!0)},r.requestBdApi=function(e,t,n){"Function"==a.objectType(t)&&(n=t,t={}),e=a.appendParam(e,t),"Function"==a.objectType(n)&&(e=a.appendCallback(e,n)),a.makeIframeRequest(e,!0)},r.writeLoginStatusToNative=function(){o.isNative&&r.requestBdApi("bdapi://wappass_login.sync")},r.openInMap=function(e,t){void 0===t&&(t=!0);var n={url:e};t&&(n.needLocation="yes"),c.sharecallbackflag&&(n.sharecallbackflag=c.sharecallbackflag),r.openBaiduMap("baidumap://map/cost_share",n)},r.getNativeInfo=function(t){var n=function(n){var i=JSON.parse(n);"Function"==a.objectType(t)&&t.call(e,i)};r.requestBdApi("bdapi://getNativeInfo",n)},r.mapShare=function(e,t){if(!o.isNative)return null;var n=/http:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{3}/,i=[],a=t?"bdapi://setShareContent?":"bdapi://openSharePrompt?";e.forEach(function(e){var t={},r=void 0,a=void 0,o=void 0;if(e.hasOwnProperty("src")){var c=e.src;switch(c){case"weibo":case"sina_weibo":t.shareTo="sina_weibo",a=e.text+e.url,o="text";break;case"weixin":t.shareTo="weixin",a=e.text;break;case"friend":case"weixin_friend":t.shareTo="weixin_friend",r=e.text;break;default:throw new Error("分享参数不对！")}t.url=e.url,t.title=r?r:e.title?e.title:"分享百度地图",t.content=a,t.contentType=o?o:e.contentType?e.contentType:"text",t.imageSource=e.pic&&n.test(e.pic)?e.pic:"icon"}i.push(t)}),i.length&&(a+=encodeURIComponent(JSON.stringify({shareList:i}))),r.requestBdApi(a)},r.weiboShare=function(t){var n="http://service.weibo.com/share/"+(o.isMobile?"mobile":"share")+".php";n=a.appendParam(n,t);try{e.open(n)}catch(i){}},r.weixinShare=function(){function t(e){a.getJsonp("http://zt.baidu.com/weixin/ticket?url="+encodeURIComponent(i.href.split("#")[0])+"&callback=?",{},function(t){t&&0===t.errno&&(r=t.data.appId,c=t.data.timestamp,u=t.data.nonceStr,s=t.data.signature,wx.config({debug:!1,appId:t.data.appId,timestamp:t.data.timestamp,nonceStr:t.data.nonceStr,signature:t.data.signature,jsApiList:v}),e&&e())},g.initError)}function n(){wx.ready(function(){f=!0,wx.onMenuShareTimeline({title:p.text,link:p.url,imgUrl:p.pic,success:function(){p.confirm&&p.confirm()},cancel:function(){p.cancel&&p.cancel()}}),wx.onMenuShareAppMessage({title:l.title,desc:l.text,link:l.url,imgUrl:l.pic,type:"link",dataUrl:"",success:function(){l.confirm&&l.confirm()},cancel:function(){l.cancel&&l.cancel()}}),wx.onMenuShareWeibo({title:"",desc:d.text,link:d.url,imgUrl:d.pic,success:function(){d.confirm&&d.confirm()},cancel:function(){d.cancel&&d.cancel()}})}),wx.error(function(){return b++,b>h?(b=0,void(g.configError&&g.configError())):void t(n)})}var r,c,u,s,p,l,d,f=!1,b=0,h=5,m="http://res.wx.qq.com/open/js/jweixin-1.0.0.js",v=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareWeibo"],g={};return function(i,r){o.isWeixin&&(i.forEach(function(e){if(e.hasOwnProperty("src")){var t=e.src;switch(t){case"weibo":case"sina_weibo":d=e;break;case"weixin":l=e;break;case"friend":case"weixin_friend":p=e;break;default:throw new Error("分享参数不对！")}}}),g="Object"==a.objectType(r)?r:{},g.loadError=g.loadError||function(){},g.initError=g.initError||function(){},g.configError=g.configError||function(){},"wx"in e?f?n():t(n):a.getScript(m,function(){t(n)},g.loadError))}}();var u=function(){var e,t;return function(n,i,c){c?e&&(o.isNative?r.mapShare(e,!1):e.some(function(e){!e.hasOwnProperty("src")||"weibo"!=e.src&&"sina_weibo"!=e.src||r.weiboShare({title:e.text,url:e.url,pic:e.pic})})):("Object"==a.objectType(n)?(e=[],e.push({src:"weibo",text:n.text,url:n.url,pic:n.weiboPic||n.weibopic,contentType:"text"}),e.push({src:"weixin",title:n.title,text:n.text,url:n.url,pic:n.weixinPic||n.weixinpic,contentType:"text"}),e.push({src:"friend",text:n.text,url:n.url,pic:n.weixinPic||n.weixinpic,contentType:"text"})):e=n,t=i,o.isNative&&r.mapShare(e,!0),o.isWeixin&&r.weixinShare(e,t))}}();r.initShare=function(e,t){u(e,t,!1)},r.openShare=function(){u(void 0,void 0,!0)},r.getLoginStatus=function(e,t){return t=t||"portrait","Function"==a.objectType(e)&&a.getJsonp("http://map.baidu.com/opn/service/checkuser",{pic:t},e),r},r.gotoLogin=function(e){var t="http://wappass.baidu.com/passport/?",n={};e=e||{},n.tpl=e.tpl||"ma",n.authsite=e.autosite?1:0,n.u=i.href,t=a.appendParam(t,n),i.href=t},r.getCity=function(){var t={1:{c:"全国"},131:{c:"北京市"},289:{c:"上海市"},332:{c:"天津市"},340:{c:"深圳市",p:"广东省"},257:{c:"广州市",p:"广东省"},233:{c:"西安市",p:"陕西省"},218:{c:"武汉市",p:"湖北省"},75:{c:"成都市",p:"四川省"},268:{c:"郑州市",p:"河南省"},132:{c:"重庆市"},288:{c:"济南市",p:"山东省"},179:{c:"杭州市",p:"浙江省"},58:{c:"沈阳市",p:"辽宁省"},224:{c:"苏州市",p:"江苏省"},315:{c:"南京市",p:"江苏省"}};return function(n){var i,r,o;"Function"==a.objectType(n)&&(i=c.c||c.cid||c.cityid,i&&t[i]?n.call(e,{id:i,name:t[i].c,province:t[i].p||t[i].c,otherData:null}):a.getJsonp({url:"http://api.map.baidu.com/location/ip?ak=x78oVekBLBQQ6VIvPoX7eNDj&callback=?",success:function(t){0===t.status&&t.content&&t.content.address_detail&&(t.content.address_detail.city&&(r=t.content.address_detail.city),t.content.address_detail.city_code&&(i=t.content.address_detail.city_code),t.content.address_detail.province&&(o=t.content.address_detail.province)),n.call(e,{id:i||null,name:r||null,province:o||null,otherData:t})}}))}}(),e.naa=e.nativeAppAdapter=r}(window,document,navigator,location);